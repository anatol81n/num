/*! maska v3.0.3 by Alexander Shabunevich | Released under the MIT license */
(function(l,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(l=typeof globalThis<"u"?globalThis:l||self,c(l.Maska={}))})(this,function(l){"use strict";var V=Object.defineProperty;var $=(l,c,M)=>c in l?V(l,c,{enumerable:!0,configurable:!0,writable:!0,value:M}):l[c]=M;var A=(l,c,M)=>$(l,typeof c!="symbol"?c+"":c,M);const c={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},M=(a,s,e)=>a.replaceAll(s,"").replace(e,".").replace("..",".").replace(/[^.\d]/g,""),P=(a,s,e)=>{var t;return new Intl.NumberFormat(((t=e.number)==null?void 0:t.locale)??"en",{minimumFractionDigits:a,maximumFractionDigits:s,roundingMode:"trunc"})},S=(a,s=!0,e)=>{var N,w,v,g;const t=((N=e.number)==null?void 0:N.unsigned)==null&&a.startsWith("-")?"-":"",n=((w=e.number)==null?void 0:w.fraction)??0;let o=P(0,n,e);const u=o.formatToParts(1000.12),h=((v=u.find(r=>r.type==="group"))==null?void 0:v.value)??" ",d=((g=u.find(r=>r.type==="decimal"))==null?void 0:g.value)??".",i=M(a,h,d);if(Number.isNaN(parseFloat(i)))return t;const f=i.split(".");if(f[1]!=null&&f[1].length>=1){const r=f[1].length<=n?f[1].length:n;o=P(r,n,e)}let p=o.format(parseFloat(i));return s?n>0&&i.endsWith(".")&&!i.slice(0,-1).includes(".")&&(p+=d):p=M(p,h,d),t+p};class C{constructor(s={}){A(this,"opts",{});A(this,"memo",new Map);const e={...s};if(e.tokens!=null){e.tokens=e.tokensReplace?{...e.tokens}:{...c,...e.tokens};for(const t of Object.values(e.tokens))typeof t.pattern=="string"&&(t.pattern=new RegExp(t.pattern))}else e.tokens=c;Array.isArray(e.mask)&&(e.mask.length>1?e.mask=[...e.mask].sort((t,n)=>t.length-n.length):e.mask=e.mask[0]??""),e.mask===""&&(e.mask=null),this.opts=e}masked(s){return this.process(s,this.findMask(s))}unmasked(s){return this.process(s,this.findMask(s),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(s){const e=this.findMask(s);if(this.opts.mask==null||e==null)return!1;const t=this.process(s,e).length;return typeof this.opts.mask=="string"?t>=this.opts.mask.length:t>=e.length}findMask(s){const e=this.opts.mask;if(e==null)return null;if(typeof e=="string")return e;if(typeof e=="function")return e(s);const t=this.process(s,e.slice(-1).pop()??"",!1);return e.find(n=>this.process(s,n,!1).length>=t.length)??""}escapeMask(s){const e=[],t=[];return s.split("").forEach((n,o)=>{n==="!"&&s[o-1]!=="!"?t.push(o-t.length):e.push(n)}),{mask:e.join(""),escaped:t}}process(s,e,t=!0){if(this.opts.number!=null)return S(s,t,this.opts);if(e==null)return s;const n=`v=${s},mr=${e},m=${t?1:0}`;if(this.memo.has(n))return this.memo.get(n);const{mask:o,escaped:u}=this.escapeMask(e),h=[],d=this.opts.tokens!=null?this.opts.tokens:{},i=this.isReversed()?-1:1,f=this.isReversed()?"unshift":"push",p=this.isReversed()?0:o.length-1,N=this.isReversed()?()=>r>-1&&m>-1:()=>r<o.length&&m<s.length,w=y=>!this.isReversed()&&y<=p||this.isReversed()&&y>=p;let v,g=-1,r=this.isReversed()?o.length-1:0,m=this.isReversed()?s.length-1:0,T=!1;for(;N();){const y=o.charAt(r),k=d[y],I=(k==null?void 0:k.transform)!=null?k.transform(s.charAt(m)):s.charAt(m);if(!u.includes(r)&&k!=null?(I.match(k.pattern)!=null?(h[f](I),k.repeated?(g===-1?g=r:r===p&&r!==g&&(r=g-i),p===g&&(r-=i)):k.multiple&&(T=!0,r-=i),r+=i):k.multiple?T&&(r+=i,m-=i,T=!1):I===v?v=void 0:k.optional&&(r+=i,m-=i),m+=i):(t&&!this.isEager()&&h[f](y),I===y&&!this.isEager()?m+=i:v=y,this.isEager()||(r+=i)),this.isEager())for(;w(r)&&(d[o.charAt(r)]==null||u.includes(r));){if(t){if(h[f](o.charAt(r)),s.charAt(m)===o.charAt(r)){r+=i,m+=i;continue}}else o.charAt(r)===s.charAt(m)&&(m+=i);r+=i}}return this.memo.set(n,h.join("")),this.memo.get(n)}}const b=a=>JSON.parse(a.replaceAll("'",'"')),W=(a,s={})=>{const e={...s};a.dataset.maska!=null&&a.dataset.maska!==""&&(e.mask=x(a.dataset.maska)),a.dataset.maskaEager!=null&&(e.eager=E(a.dataset.maskaEager)),a.dataset.maskaReversed!=null&&(e.reversed=E(a.dataset.maskaReversed)),a.dataset.maskaTokensReplace!=null&&(e.tokensReplace=E(a.dataset.maskaTokensReplace)),a.dataset.maskaTokens!=null&&(e.tokens=O(a.dataset.maskaTokens));const t={};return a.dataset.maskaNumberLocale!=null&&(t.locale=a.dataset.maskaNumberLocale),a.dataset.maskaNumberFraction!=null&&(t.fraction=parseInt(a.dataset.maskaNumberFraction)),a.dataset.maskaNumberUnsigned!=null&&(t.unsigned=E(a.dataset.maskaNumberUnsigned)),(a.dataset.maskaNumber!=null||Object.values(t).length>0)&&(e.number=t),e},E=a=>a!==""?!!JSON.parse(a):!0,x=a=>a.startsWith("[")&&a.endsWith("]")?b(a):a,O=a=>{if(a.startsWith("{")&&a.endsWith("}"))return b(a);const s={};return a.split("|").forEach(e=>{const t=e.split(":");s[t[0]]={pattern:new RegExp(t[1]),optional:t[2]==="optional",multiple:t[2]==="multiple",repeated:t[2]==="repeated"}}),s};class F{constructor(s,e={}){A(this,"items",new Map);A(this,"onInput",s=>{if(s instanceof CustomEvent&&s.type==="input"&&!s.isTrusted&&!s.bubbles)return;const e=s.target,t=this.items.get(e),n="inputType"in s&&s.inputType.startsWith("delete"),o=t.isEager(),u=n&&o&&t.unmasked(e.value)===""?"":e.value;this.fixCursor(e,n,()=>this.setValue(e,u))});this.options=e,this.init(this.getInputs(s))}update(s={}){this.options={...s},this.init(Array.from(this.items.keys()))}updateValue(s){s.value!==""&&s.value!==this.processInput(s).masked&&this.setValue(s,s.value)}destroy(){for(const s of this.items.keys())s.removeEventListener("input",this.onInput);this.items.clear()}init(s){const e=this.getOptions(this.options);for(const t of s){this.items.has(t)||t.addEventListener("input",this.onInput,{capture:!0});const n=new C(W(t,e));this.items.set(t,n),queueMicrotask(()=>this.updateValue(t)),t.selectionStart===null&&n.isEager()&&console.warn("Maska: input of `%s` type is not supported",t.type)}}getInputs(s){return typeof s=="string"?Array.from(document.querySelectorAll(s)):"length"in s?Array.from(s):[s]}getOptions(s){const{onMaska:e,preProcess:t,postProcess:n,...o}=s;return o}fixCursor(s,e,t){const n=s.selectionStart,o=s.value;if(t(),n===null||n===o.length&&!e)return;const u=s.value,h=o.slice(0,n),d=u.slice(0,n),i=this.processInput(s,h).unmasked,f=this.processInput(s,d).unmasked;let p=n;h!==d&&(p+=e?u.length-o.length:i.length-f.length),s.setSelectionRange(p,p)}setValue(s,e){const t=this.processInput(s,e);s.value=t.masked,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(n=>n(t)):this.options.onMaska(t)),s.dispatchEvent(new CustomEvent("maska",{detail:t})),s.dispatchEvent(new CustomEvent("input",{detail:t.masked}))}processInput(s,e){const t=this.items.get(s);let n=e??s.value;this.options.preProcess!=null&&(n=this.options.preProcess(n));let o=t.masked(n);return this.options.postProcess!=null&&(o=this.options.postProcess(o)),{masked:o,unmasked:t.unmasked(n),completed:t.completed(n)}}}const R=new WeakMap,j=(a,s)=>{if(a.arg==null||a.instance==null)return;const e="setup"in a.instance.$.type;a.arg in a.instance?a.instance[a.arg]=s:e&&console.warn("Maska: please expose `%s` using defineExpose",a.arg)},L=(a,s)=>{var n;const e=a instanceof HTMLInputElement?a:a.querySelector("input");if(e==null||(e==null?void 0:e.type)==="file")return;let t={};if(s.value!=null&&(t=typeof s.value=="string"?{mask:s.value}:{...s.value}),s.arg!=null){const o=u=>{const h=s.modifiers.unmasked?u.unmasked:s.modifiers.completed?u.completed:u.masked;j(s,h)};t.onMaska=t.onMaska==null?o:Array.isArray(t.onMaska)?[...t.onMaska,o]:[t.onMaska,o]}R.has(e)?(n=R.get(e))==null||n.update(t):R.set(e,new F(e,t))};l.Mask=C,l.MaskInput=F,l.tokens=c,l.vMaska=L,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
